window.console||(window.console={log:function(){},error:function(){},debug:function(){}});
var polyClip=new function(){function n(b){E&&console.log(b)}function K(b,a){var d=new Image;jQuery(a).attr("data-polyclip-index",b);jQuery(d).bind("load",function(){var g=jQuery(a);g.attr("data-polyclip-transformorigin")||g.attr("data-polyclip-transformorigin",a.width/2+","+a.height/2);n("Cached "+d.src);A[d.src]=d;drawShape(b,a);var q,g=A,v=0;for(q in g)g.hasOwnProperty(q)&&v++;q=v;s.length==q?h.runCallbacks():n("Cached "+s.length+" out of "+q+" images.")});d.src=a.src}function t(b,a,d,g,q){b=b.x(a.add(d));
b=b.add(g);q.push(b.e(1));q.push(b.e(2));return b}var h=this,s,w=[],A=[],F=[],B=[],G=navigator.userAgent.match(/(iPad|iPhone|iPod)/i)?!0:!1;!G&&document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg");var z,H,I,E=!1,C=!1;h.useSVGGlobally=!1;h.aniamtionNode=null;h.index=-1;h.isOldIE=window.G_vmlCanvasManager;h.polygonCache=[];h.init=function(){n("Initializing.");for(var b=document.getElementsByTagName("script"),a=null,d=0;d<b.length;d++){var g=b[d];g.src.match("polyclip(-p){0,1}.js")&&
(a=g)}if(!(b=!a)){var q=!1;jQuery.each(a.attributes,function(a,b){0==b.name.indexOf("data-")&&(q=!0)});b=!q}b&&(a=document.body);if(z=a){H=z.getAttribute("data-polyclip-clippreference");I=z.getAttribute("data-polyclip-forcepointerevents");E=z.getAttribute("data-polyclip-showdebugmessages")||!1;C=!h.isOldIE&&!G&&"true"==I;if(a="SVG"==H)if(a=C)a=document.createElement("x"),b=document.documentElement,d=window.getComputedStyle,"pointerEvents"in a.style?(a.style.pointerEvents="auto",a.style.pointerEvents=
"x",b.appendChild(a),d=d&&"auto"===d(a,"").pointerEvents,b.removeChild(a),a=!!d):a=!1,a=!a;a&&(h.useSVGGlobally=!0)}h.$animationNode=jQuery('<div id="polyClip-tmp" />');document.body.appendChild(h.$animationNode.get(0));s=jQuery("img[data-polyclip]");n("Clipping "+s.length+" image(s).");0<s.length?s.each(K):h.runCallbacks()};h.clipImage=function(b,a,d,g,q){var h=b.jquery?b:jQuery(b),j=a;g=h.attr("data-polyclip-transformorigin");var c,f;b=b.jquery?b.get(0):b;g&&(g=g.split(","));g&&2==g.length&&(c=
parseFloat(g[0]),f=parseFloat(g[1]));!g||isNaN(c)||isNaN(f)?(g=b.offsetWidth/2,q=b.offsetHeight/2):(g=c,q=f);b.jquery&&b.get(0);if(d)if(window.$M){n("transform: "+d);"string"==typeof d&&(d=D.getTransformationMatrix(d));b=d;f=g;j=q;c=jQuery.trim(a);f=null==f?0:f;j=null==j?0:j;a=$V([-f,-j,0]);var j=$V([f,j,0]),l;if(0==c.indexOf("path:")){c=c.substring(5);f=c.replace(","," ").split(/\s+/);var e=[],m=$V([0,0,1]),k=null;for(c=0;c<f.length;){var p=f[c];isNaN(parseFloat(p))?e.push(p):(p=k,c--);var J=p.toUpperCase(),
k=0;switch(J){case "M":case "L":case "T":k=1;break;case "S":case "Q":k=2;break;case "C":k=2}switch(J){case "H":l=$V([parseFloat(f[c+1]),m.e(2),1]);t(b,l,a,j,e);break;case "V":l=$V([m.e(1),parseFloat(f[c+1]),1]);t(b,l,a,j,e);break;case "M":case "L":case "T":case "S":case "Q":case "C":for(m=0;m<k;m++)l=$V([parseFloat(f[c+2*m+1]),parseFloat(f[c+2*m+2]),1]),t(b,l,a,j,e);break;case "A":e.push(f[c+1],f[c+2],f[c+3],f[c+4],f[c+5]),l=$V([parseFloat(f[c+6]),parseFloat(f[c+7]),1]),t(b,l,a,j,e)}c+=1+2*k;k=p;
m=l}j=void 0}else{f=[];e=c.split(",");for(c=0;c<e.length;c+=2)l=$V([parseInt(jQuery.trim(e[c])),parseInt(jQuery.trim(e[c+1])),1]),t(b,l,a,j,f),n(b.e(1,1));j=f.join(",")}n(d)}else n("Sylvester.js is needed for scaling clip. Transformation aborted.");h.attr("data-polyclip-transformcoords",j).attr("data-polyclip-transformorigin",g+","+q).each(drawShape);return h};h.transformClip=function(b,a,d,g){b=b.jquery?b:jQuery(b);h.clipImage(b,b.attr("data-polyclip"),a,d,g)};drawShape=function(b,a){var d=jQuery(a),
g=jQuery.trim(d.attr("data-polyclip")),q=jQuery.trim(d.attr("data-polyclip-transformcoords")),v=d.attr("data-polyclip-transformorigin").split(",");parseFloat(v[0]);parseFloat(v[1]);var j=q||g,c,f,l,e;c=a.src;var m,k=a.id?a.id:"polyClip"+b,p=d,n,s,t=(h.useSVGGlobally||"SVG"==a.getAttribute("data-polyclip-clippreference")||"SVG"==a.nodeName.toUpperCase())&&C,u;m=[];if(0==j.indexOf("path:"))l=j.substr(5);else{f=j.split(",");for(j=0;j<f.length;j+=2){var x=parseInt(jQuery.trim(f[j])),y=parseInt(jQuery.trim(f[j+
1]));m.push(x+","+y+" ")}}if(t||l)u='width="'+a.offsetWidth+'" height="'+a.offsetHeight+'"',u='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="'+k+'" class="polyClip-clipped"  xmlns:xlink="http://www.w3.org/1999/xlink" '+u+'><defs><pattern id="polyClip-img-for-'+k+'" patternUnits="userSpaceOnUse" '+u+'><image xlink:href="'+c+'" x="0" y="0" '+u+"/></pattern></defs>",u=l?u+('<path id="polyClip-poly-for-'+k+'" d="'+l+'" style="fill:url(\'#polyClip-img-for-'+k+"');\" /></svg>"):u+('<polygon id="polyClip-poly-for-'+
k+'" points="'+m.join()+'" style="fill:url(\'#polyClip-img-for-'+k+"');\" /></svg>");switch(a.nodeName.toUpperCase()){case "IMG":n=a.offsetWidth;s=a.offsetHeight;if(t)n=(new DOMParser).parseFromString(u,"application/xml"),importNode=a.ownerDocument.importNode(n.documentElement,!0),d.attr("id","").replaceWith(importNode),d=jQuery(importNode),d.attr("data-polyclip",g).attr("data-polyclip-transformcoords",q).attr("data-polyclip-transformorigin",v).attr("data-polyclip-transformoriginy",v),h.polygonCache[k]=
jQuery("#polyClip-poly-for-"+k,d).get(0),n=a.offsetWidth,s=a.offsetHeight,p=d;else{var r=document.createElement("canvas"),p=jQuery(r);e=d.attr("data-polyclip-width");r.width=e?parseInt(e):n;e=d.attr("data-polyclip-height");r.height=e?parseInt(e):s;r.id=k;p.attr("data-polyclip",g).attr("data-polyclip-transformcoords",q).attr("data-polyclip-transformorigin",v).attr("data-src",c).addClass("polyClip-clipped");d.replaceWith(r);h.isOldIE&&G_vmlCanvasManager.initElement(r);e=r.getContext("2d");F[k]=e;jQuery(window).trigger("resize");
g=p.css("pointer-events");h.polygonCache[k]={ctx:e,imageData:e.getImageData?e.getImageData(0,0,r.width,r.height).data:null,pointerEventCSS:g?g.toLowerCase():null}}break;case "SVG":l?h.polygonCache[k].setAttribute("d",l):h.polygonCache[k].setAttribute("points",m.join());break;case "CANVAS":r=a,c=d.attr("data-src"),e=F[k]}if(!t){w[r.id]=[];e.save();e.clearRect(0,0,r.width,r.height);if(l)e.drawSvg(u,0,0,n,s);else{e.beginPath();for(j=0;j<f.length;j+=2)x=parseInt(jQuery.trim(f[j])),y=parseInt(jQuery.trim(f[j+
1])),w[r.id].push({x:x,y:y}),0==j?e.moveTo(x,y):e.lineTo(x,y);e.closePath()}h.isOldIE?(e.fillStyle="",e.fill(),f=jQuery("fill",r).get(0),l=jQuery("shape",r).get(0),f.color="none",l.fillcolor="none",f.src=c,f.type="tile",f.alignShape=!1):(c=e.createPattern(A[c],"repeat"),e.fillStyle=c,e.fill());e.restore();g=p.css("pointer-events");h.polygonCache[k]={ctx:e,imageData:e.getImageData?e.getImageData(0,0,r.width,r.height).data:null,pointerEventCSS:g?g.toLowerCase():null}}return p};h.findObject=function(b){var a=
b.currentTarget;if(jQuery(a).hasClass("cropParent"))return jQuery(a);for(var d in w)if(w.hasOwnProperty(d)&&(a=jQuery("#"+d),h.isInPolygon(a,b.pageX,b.pageY,!0)))return a};h.isInPolygon=function(b,a,d,g){var h=b.get(0),h=w[h.id],n=h.length,j,c,f,l,e,m,k=!1,p={left:0,top:0};g&&(p=b.offset());if(3>n)return!1;j=h[n-1].x+p.left;c=h[n-1].y+p.top;for(m=0;m<n;m++)b=h[m].x+p.left,g=h[m].y+p.top,b>j?(f=j,e=b,l=c,c=g):(f=b,e=j,l=g),b<a==a<=j&&(d-l)*(e-f)<(c-l)*(a-f)&&(k=!k),j=b,c=g;return k};h.addCallback=
function(b){B.push(b)};h.runCallbacks=function(){n("Cached all images.  Running callbacks...");for(var b=0;b<B.length;b++)B[b]()};if(window.$M)var D=new function(){function b(c){var a=parseFloat(c),b=c.match(d);"0"==jQuery.trim(c)&&(a=0,b="rad");if(1!=b.length||0==a)return 0;b=b[0];switch(b){case "deg":c=a*Math.PI/180;break;case "rad":c=a;break;default:throw"Not an angle: "+c;}return c}var a=this,d=/[a-z]+$/,g=/[a-zA-Z]+\([^\)]*\)\s*/g,h=/\(/g,s=/\)/g,j=/,/g;a.identity=$M([[1,0,0],[0,1,0],[0,0,1]]);
a.prettyPrint=function(c){return StringHelpers.sprintf("| %s %s %s | - | %s %s %s | - |%s %s %s|",c.e(1,1),c.e(1,2),c.e(1,3),c.e(2,1),c.e(2,2),c.e(2,3),c.e(3,1),c.e(3,2),c.e(3,3))};a.rotate=function(c){c=b(c);return Matrix.RotationZ(c)};a.scale=function(c,a){c=parseFloat(c);a=a?parseFloat(a):c;return $M([[c,0,0],[0,a,0],[0,0,1]])};a.scaleX=function(c){return a.scale(c,1)};a.scaleY=function(c){return a.scale(1,c)};a.skew=function(a,f){var d=b(a),e;e=null!=f?b(f):d;return null!=d&&null!=e?$M([[1,Math.tan(d),
0],[Math.tan(e),1,0],[0,0,1]]):null};a.skewX=function(c){return a.skew(c,"0")};a.skewY=function(c){return a.skew("0",c)};a.translate=function(a,b){var d=parseInt(a),e=parseInt(b);return $M([[1,0,d],[0,1,e],[0,0,1]])};a.translateX=function(c){return a.translate(c,0)};a.translateY=function(c){return a.translate(0,c)};a.matrix=function(a,b,d,e,g,h){return $M([[a,d,parseInt(g)],[b,e,parseInt(h)],[0,0,1]])};a.getTransformationMatrix=function(a,b){n("transformString is "+a);var d=a.match(g);if(b){var e=
d.join(" ").replace(/\s*/g," "),m=a.replace(/\s*/g," ");if(e!=m)throw"An invalid transform was given: "+a;}m=D.identity;n("num of transforms "+d.length);for(var k=0;k<d.length;k++){e=d[k];e=e.replace(h,'("').replace(j,'", "').replace(s,'")');try{n("looking up : "+e);var p=eval("MatrixGenerator."+e),m=m.x(p)}catch(t){if(b){d=e.split("(")[0];p=e.replace(/\"/g,"");if(void 0==D[d])throw"Error: invalid tranform function: "+p;throw"Error: Invalid or missing parameters in function call: "+p;}}}return m}}};
document.write('<style type="text/css">img[data-polyclip], img.polyClip { visibility: hidden; } </style>');polyClip.isOldIE?jQuery(window).bind("load",polyClip.init):jQuery(document).ready(polyClip.init);